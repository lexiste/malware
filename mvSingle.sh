#!/usr/bin/env bash

##
## script to allow moving of a single file using the same format that the
## peeping.sh uses
##

if [ -z "$1" ]; then
   echo "no argument supplied, send filename and extension"
   exit 1
else
   file=$1
   if [ -z "$2" ]; then
      ext=".txt"
   else
      ext=$2
   fi

   date=$(/bin/date +%b%d)
   if [ ! -d "archive/${date}" ]; then
      mkdir "archive/${date}"
   fi
   rand=$(cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 16 | head -n 1)
   mv ${file} "archive/${date}/${rand}.${ext}"
   echo "[$(/bin/date +%Y%b%d\ %T)] moving ${file} to ${rand}.${ext}" >> peeping.log
   echo "[$(/bin/date +%Y%b%d\ %T)] moving ${file} to ${rand}.${ext}"
fi
